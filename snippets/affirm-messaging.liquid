{% comment %}
Affirm Promotional Messaging Snippet
Usage: {% render 'affirm-messaging' %}
{% endcomment %}

<style>
  .custom-affirm{
    text-align: center;
  }
  .custom-affirm a {
    color: #0000ee !important;
    text-decoration: underline !important;
  }
  .product-price+.product-info__pay .custom-affirm{
    text-align: left;
  }
</style>

<p class="affirm-as-low-as custom-affirm"
   data-amount="{{ product.selected_or_first_available_variant.price }}"
   data-page-type="product"
   data-learnmore-show="true">
</p>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    const observer = new MutationObserver(() => {
      const affirmTriggers = document.querySelectorAll(".affirm-modal-trigger");

      affirmTriggers.forEach((el) => {
        if (!el.dataset.modified) { // prevent duplicate edits
          const targetNode = el.querySelector("span") || el;
          targetNode.textContent = "See if you qualify";
          el.dataset.modified = "true";
        }
      });
    }); 

    observer.observe(document.body, {
      childList: true,
      subtree: true
    });

    // optional: stop observing after some time
    setTimeout(() => observer.disconnect(), 10000);
  });
</script>